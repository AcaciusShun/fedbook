# 插入与查询语句

## 插入语句

### 语法格式

MySQL 插入数据的时候是以行为单位的，语法格式如下：

```sql
INSERT INTO 表名(列1, 列2, ...) VALUES (列1的值，列2的值, ...);
```

也可以只指定部分的列以及对应的值，没有显式指定的列的值将被设置为 `NULL`。

有时候为了方便，可以批量插入数据，语法格式如下：

```sql
INSERT INTO 表名(列1,列2, ...) VAULES 
(列1的值，列2的值, ...), 
(列1的值，列2的值, ...), 
(列1的值，列2的值, ...), 
...;
```

也就是在原来的单条插入语句后边多写几条记录的内容，用逗号分隔开就好了。

### 建表插数据

实际建两个表并插入数据，方便后面查询。

创建学生信息表 `student_info`：

```sql
CREATE TABLE student_info (
    number INT PRIMARY KEY,
    name VARCHAR(5),
    sex ENUM('男', '女'),
    id_number CHAR(18),
    department VARCHAR(30),
    major VARCHAR(30),
    enrollment_time DATE,
    UNIQUE KEY (id_number)
);
```

创建学生成绩表 `student_score`：

```sql
CREATE TABLE student_score (
    number INT,
    subject VARCHAR(30),
    score TINYINT,
    PRIMARY KEY (number, subject),
    CONSTRAINT FOREIGN KEY(number) REFERENCES student_info(number)
);
```

给学生信息表插入一些数据：

```sql
INSERT INTO student_info(number, name, sex, id_number, department, major, enrollment_time) VALUES 
(20220101, '张星星', '男', '158177199901044792', '计算机学院', '计算机科学与工程', '2022-09-01'),
(20220102, '王二狗', '女', '151008199801178529', '计算机学院', '计算机科学与工程', '2022-09-01'),
(20220103, '陈珊珊', '男', '17156319980116959X', '计算机学院', '软件工程', '2022-09-01'),
(20220104, '李思思', '女', '141992199701078600', '计算机学院', '软件工程', '2022-09-01'),
(20220105, '孙小武', '男', '181048199308156368', '航天学院', '飞行器设计', '2022-09-01'),
(20220106, '刘大彪', '男', '197995199501078445', '航天学院', '电子信息', '2022-09-01');
```

给学生成绩表插入一些数据：

```sql
INSERT INTO student_score (number, subject, score) VALUES 
(20220101, '高等数学', 78),
(20220101, '线性代数', 88),
(20220102, '复变函数与积分', 87),
(20220102, '大学英语', 95),
(20220103, '大学物理', 75),
(20220103, '数据结构与算法', 92),
(20220104, '操作系统', 72),
(20220104, '体育选修课', 56);
```

## 查询列的语句

### 查询单个列

查看某个表中的某一列的数据，语法格式如下：

```sql
SELECT 列名 FROM 表名;
```

列名为星号（`*`）表示把记录中的所有列都查出来。有时候会很方便，但是查询不需要的列通常会降低性能，视情况而用吧。

### 列的别名

可以为结果集中的列重新定义一个别名，语法格式如下：

```sql
SELECT 列名 [AS] 列的别名 FROM 表名;
```

这里的 `AS` 加了个中括号，意思是这个指定别名的语法中，`AS` 这个单词是可有可无的（不过我觉得加上这个单词可以增加可读性）。

定义别名后，用 SELECT 语法查询出来的结果里，原列名就被别名替代了。不过别名只在本次查询得到的结果集中展示，并不会改变真实表中的列名。下一次查询中取其他的别名也可以。

### 查询多个列

如果想查询多个列的数据，可以在 `SELECT` 后边写多个列名，用逗号 `,` 分隔开就好：

```sql
SELECT 列名1, 列名2, ... 列名n FROM 表名;
```

查询语句中的列名可以按任意顺序摆放，结果集将按照我们指定的列名顺序显示。

## 查询结果去重

### 去除单列的重复结果

有的时候我们查询某个列的数据时会有一些重复的结果，比如我们查询 `student_info` 表的学院信息，会有重复的学院名。

如果想去除重复结果的话，可以将 `DISTINCT` 放在被查询的列前面，语法格式如下：

```sql
SELECT DISTINCT 列名 FROM 表名;
```

这样的结果集里，就只剩下不重复的信息了，比如从学生表里查一下这个学校一共有哪些学院。

### 去除多列的重复结果

对于查询多列的情况，两条结果重复的意思是：两条结果的每一个列中的值都相同。比如查询学院和专业信息，这两个列的值都相同（都是 `计算机学院` 下面的 `软件工程` 专业）。

如果想对多列查询的结果去重的话，可以直接把 `DISTINCT` 放在被查询的列的最前面：

```sql
SELECT DISTINCT 列名1, 列名2, ... 列名n FROM 表名;
```

## 限制查询结果条数

在查询语句的末尾使用 `LIMIT` 关键字可以限制结果集中的记录条数。

```sql
LIMIT 开始行, 限制条数;
```

* `开始行` 指的是我们想从第几行数据开始查询，从 `0` 开始计数
* `限制条数` 是结果集中最多包含多少条记录

`LIMIT` 后面也可以只有一个参数，那这个参数就代表着**限制行数**，此时默认的开始行就是第 `0` 行。

## 对查询结果排序

MySQL 默认会按照数据底层**存储的顺序**来给我们返回数据，如果想让返回结果中的记录按照某种特定的规则排序，就必须显式地指定排序规则。

### 按照单个列的值进行排序

```sql
ORDER BY 列名 ASC|DESC
```

* `ASC` 指按照指定列的值进行由小到大进行排序，也叫做升序
* `DESC` 指按照指定列的值进行由大到小进行排序，也叫做降序
* 省略排序方向时默认时升序，即 `ASC`

### 按照多个列的值进行排序

同时指定多个排序的列，多个排序列之间用逗号 `,` 隔开。

```sql
ORDER BY 列1 ASC|DESC, 列2 ASC|DESC ...
```

表示查询结果先按照 `列1` 排序，再按照 `列2` 排序。

### ORDER BY 结合 LIMIT

这两个语句结合使用时，`ORDER BY` 语句必须放在 `LIMIT` 语句前面：

```sql
SELECT * FROM 表名 ORDER BY 列1 LIMIT 1;
```

比如这条语句可以找出 `列1` 值最小的那条记录。

（完）
