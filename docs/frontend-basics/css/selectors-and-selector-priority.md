# 选择器与样式优先级

## 1. 选择器写法

[CSS 选择器参考手册](https://www.w3school.com.cn/cssref/css_selectors.asp "CSS 选择器参考手册")

## 2. 样式优先级

当声明冲突时，CSS 会根据三种条件来决定样式优先级：

* **样式表的来源**：

  行内样式 > 嵌入样式 > 外链样式

* **选择器优先级**：
  * 如果选择器的 ID 数量更多，则它会胜出（即它更明确）。
  * 如果 ID 数量一致，那么拥有最多类的选择器胜出。
  * 如果以上两次比较都一致，那么拥有最多标签名的选择器胜出。

* **源码顺序**：

  如果两个声明的来源和优先级相同，那么后出现的样式（在样式表中出现较晚，或者位于页面较晚引入的样式表中）会覆盖先出现的样式。<br>
  例如：`link（链接）`、`visited（访问）`、`hover（悬停）`、`active（激活）`，就得严格遵守这个顺序，否则会带来意想不到的结果。

<svg id="SvgjsSvg1142" width="815.0000305175781" height="291.59999084472656" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1143"><marker id="SvgjsMarker1210" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1211" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1214" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1215" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1218" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1219" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1222" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1223" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1226" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1227" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1230" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1231" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1234" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1235" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker></defs><g id="SvgjsG1144" transform="translate(25,51.999990463256836)"><path id="SvgjsPath1145" d="M 16.666666666666668 0L 83.33333333333333 0C 105.55555555555556 0 105.55555555555556 50 83.33333333333333 50L 16.666666666666668 50C -5.555555555555556 50 -5.555555555555556 0 16.666666666666668 0Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1146"><text id="SvgjsText1147" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="80px" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="15.05" transform="rotate(0)"><tspan id="SvgjsTspan1148" dy="16" x="50"><tspan id="SvgjsTspan1149" style="text-decoration:;">冲突的声明</tspan></tspan></text></g></g><g id="SvgjsG1150" transform="translate(168,24.999990463256836)"><path id="SvgjsPath1151" d="M 0 52L 61 0L 122 52L 61 104L 0 52Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1152"><text id="SvgjsText1153" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="102px" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="34.05" transform="rotate(0)"><tspan id="SvgjsTspan1154" dy="16" x="61"><tspan id="SvgjsTspan1155" style="text-decoration:;">不同的来源</tspan></tspan><tspan id="SvgjsTspan1156" dy="16" x="61"><tspan id="SvgjsTspan1157" style="text-decoration:;">或者重要性</tspan></tspan></text></g></g><g id="SvgjsG1158" transform="translate(332,24.999990463256836)"><path id="SvgjsPath1159" d="M 0 52L 61 0L 122 52L 61 104L 0 52Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1160"><text id="SvgjsText1161" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="102px" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="26.05" transform="rotate(0)"><tspan id="SvgjsTspan1162" dy="16" x="61"><tspan id="SvgjsTspan1163" style="text-decoration:;">是不是</tspan></tspan><tspan id="SvgjsTspan1164" dy="16" x="61"><tspan id="SvgjsTspan1165" style="text-decoration:;">内联</tspan><tspan id="SvgjsTspan1166" style="text-decoration:;font-size: inherit;">样式</tspan></tspan><tspan id="SvgjsTspan1167" dy="16" x="61"><tspan id="SvgjsTspan1168" style="text-decoration:;">（作用域）</tspan></tspan></text></g></g><g id="SvgjsG1169" transform="translate(502,24.999990463256836)"><path id="SvgjsPath1170" d="M 0 52L 61 0L 122 52L 61 104L 0 52Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1171"><text id="SvgjsText1172" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="102px" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="34.05" transform="rotate(0)"><tspan id="SvgjsTspan1173" dy="16" x="61"><tspan id="SvgjsTspan1174" style="text-decoration:;">选择器是否有</tspan></tspan><tspan id="SvgjsTspan1175" dy="16" x="61"><tspan id="SvgjsTspan1176" style="text-decoration:;">不同的优先级</tspan></tspan></text></g></g><g id="SvgjsG1177" transform="translate(670,51.999990463256836)"><path id="SvgjsPath1178" d="M 16.666666666666668 0L 103.33333333333333 0C 125.55555555555556 0 125.55555555555556 50 103.33333333333333 50L 16.666666666666668 50C -5.555555555555556 50 -5.555555555555556 0 16.666666666666668 0Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1179"><text id="SvgjsText1180" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="100px" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.05" transform="rotate(0)"><tspan id="SvgjsTspan1181" dy="16" x="60"><tspan id="SvgjsTspan1182" style="text-decoration:;">使用源码顺序里</tspan></tspan><tspan id="SvgjsTspan1183" dy="16" x="60"><tspan id="SvgjsTspan1184" style="text-decoration:;">较晚出现的声明</tspan></tspan></text></g></g><g id="SvgjsG1185" transform="translate(172,175.99999046325684)"><path id="SvgjsPath1186" d="M 17.333333333333332 0L 96.66666666666667 0C 119.77777777777777 0 119.77777777777777 52 96.66666666666667 52L 17.333333333333332 52C -5.777777777777778 52 -5.777777777777778 0 17.333333333333332 0Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1187"><text id="SvgjsText1188" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="94px" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="8.05" transform="rotate(0)"><tspan id="SvgjsTspan1189" dy="16" x="57"><tspan id="SvgjsTspan1190" style="text-decoration:;">使用更高优先级</tspan></tspan><tspan id="SvgjsTspan1191" dy="16" x="57"><tspan id="SvgjsTspan1192" style="text-decoration:;">的来源里的声明</tspan></tspan></text></g></g><g id="SvgjsG1193" transform="translate(336,175.99999046325684)"><path id="SvgjsPath1194" d="M 17.333333333333332 0L 96.66666666666667 0C 119.77777777777777 0 119.77777777777777 52 96.66666666666667 52L 17.333333333333332 52C -5.777777777777778 52 -5.777777777777778 0 17.333333333333332 0Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1195"><text id="SvgjsText1196" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="94px" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="16.05" transform="rotate(0)"><tspan id="SvgjsTspan1197" dy="16" x="57"><tspan id="SvgjsTspan1198" style="text-decoration:;">使用内联声明</tspan></tspan></text></g></g><g id="SvgjsG1199" transform="translate(506,175.99999046325684)"><path id="SvgjsPath1200" d="M 17.333333333333332 0L 96.66666666666667 0C 119.77777777777777 0 119.77777777777777 52 96.66666666666667 52L 17.333333333333332 52C -5.777777777777778 52 -5.777777777777778 0 17.333333333333332 0Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1201"><text id="SvgjsText1202" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="94px" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="8.05" transform="rotate(0)"><tspan id="SvgjsTspan1203" dy="16" x="57"><tspan id="SvgjsTspan1204" style="text-decoration:;">使用更高</tspan><tspan id="SvgjsTspan1205" style="text-decoration:;font-size: inherit;">优</tspan></tspan><tspan id="SvgjsTspan1206" dy="16" x="57"><tspan id="SvgjsTspan1207" style="text-decoration:;font-size: inherit;">先级的声明</tspan></tspan></text></g></g><g id="SvgjsG1208"><path id="SvgjsPath1209" d="M125 76.99999046325684L146.5 76.99999046325684L146.5 76.99999046325684L168 76.99999046325684" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1210)"></path></g><g id="SvgjsG1212"><path id="SvgjsPath1213" d="M290 76.99999046325684L311 76.99999046325684L311 76.99999046325684L332 76.99999046325684" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1214)"></path></g><g id="SvgjsG1216"><path id="SvgjsPath1217" d="M454 76.99999046325684L478 76.99999046325684L478 76.99999046325684L502 76.99999046325684" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1218)"></path></g><g id="SvgjsG1220"><path id="SvgjsPath1221" d="M624 76.99999046325684L647 76.99999046325684L647 76.99999046325684L670 76.99999046325684" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1222)"></path></g><g id="SvgjsG1224"><path id="SvgjsPath1225" d="M229 128.99999046325684L229 152.49999046325684L229 152.49999046325684L229 175.99999046325684" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1226)"></path></g><g id="SvgjsG1228"><path id="SvgjsPath1229" d="M393 128.99999046325684L393 152.49999046325684L393 152.49999046325684L393 175.99999046325684" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1230)"></path></g><g id="SvgjsG1232"><path id="SvgjsPath1233" d="M563 128.99999046325684L563 152.49999046325684L563 152.49999046325684L563 175.99999046325684" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1234)"></path></g><g id="SvgjsG1236" transform="translate(247,43.999990463256836)"><path id="SvgjsPath1237" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1238"><text id="SvgjsText1239" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.05" transform="rotate(0)"><tspan id="SvgjsTspan1240" dy="16" x="60"><tspan id="SvgjsTspan1241" style="text-decoration:;">否</tspan></tspan></text></g></g><g id="SvgjsG1242" transform="translate(412,43.999990463256836)"><path id="SvgjsPath1243" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1244"><text id="SvgjsText1245" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.05" transform="rotate(0)"><tspan id="SvgjsTspan1246" dy="16" x="60"><tspan id="SvgjsTspan1247" style="text-decoration:;">否</tspan></tspan></text></g></g><g id="SvgjsG1248" transform="translate(579,43.999990463256836)"><path id="SvgjsPath1249" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1250"><text id="SvgjsText1251" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.05" transform="rotate(0)"><tspan id="SvgjsTspan1252" dy="16" x="60"><tspan id="SvgjsTspan1253" style="text-decoration:;">否</tspan></tspan></text></g></g><g id="SvgjsG1254" transform="translate(183,128.99999046325684)"><path id="SvgjsPath1255" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1256"><text id="SvgjsText1257" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.05" transform="rotate(0)"><tspan id="SvgjsTspan1258" dy="16" x="60"><tspan id="SvgjsTspan1259" style="text-decoration:;">是</tspan></tspan></text></g></g><g id="SvgjsG1260" transform="translate(349,128.99999046325684)"><path id="SvgjsPath1261" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1262"><text id="SvgjsText1263" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.05" transform="rotate(0)"><tspan id="SvgjsTspan1264" dy="16" x="60"><tspan id="SvgjsTspan1265" style="text-decoration:;">是</tspan></tspan></text></g></g><g id="SvgjsG1266" transform="translate(516,128.99999046325684)"><path id="SvgjsPath1267" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1268"><text id="SvgjsText1269" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.05" transform="rotate(0)"><tspan id="SvgjsTspan1270" dy="16" x="60"><tspan id="SvgjsTspan1271" style="text-decoration:;">是</tspan></tspan></text></g></g><g id="SvgjsG1272" transform="translate(264.5,242.59999084472656)"><path id="SvgjsPath1273" d="M 0 0L 257 0L 257 24L 0 24Z" stroke="none" fill="none"></path><g id="SvgjsG1274"><text id="SvgjsText1275" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="257px" fill="#a1a1a1" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.05" transform="rotate(0)"><tspan id="SvgjsTspan1276" dy="16" x="128.5"><tspan id="SvgjsTspan1277" style="text-decoration:;">层叠的规则流程图，展示了声明的优先顺序</tspan></tspan></text></g></g></svg>

## 3. 经验法则

在使用选择器时有一些通用的经验法则，如果遵守这些法则会很有用（特殊情况除外）。

* **最好让优先级尽可能低**<br>
  这样当需要覆盖一些样式时，才能有选择空间。

* **在选择器中不要使用 ID**<br>
  就算只用一个 ID 时也会大幅提升优先级，当需要覆盖这个选择器时，通常找不到另一个更有意义的 ID，于是就会复制原来的选择器，然后加上另一个类。

* **不要使用 !important**<br>
  它比 ID 更难覆盖，一旦引入一个 !important，想要覆盖原先的声明，就会带来更多的 !important，最终会让一切回到起点。

* **当创建一个用于分发的模块（例如 NPM 包）时，尽量不要使用行内样式**<br>
  否则开发人员要么全盘接受包里的样式，要么给每个想修改的属性加上 !important。<br>
  正确的做法是在包里包含一个样式表，这样用户就可以在使用这份样式表的同时，在不引入优先级竞赛的前提下，自定义其中的样式。
